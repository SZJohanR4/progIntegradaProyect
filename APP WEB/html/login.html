<!DOCTYPE html>
<html lang="es" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/loginStyle.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <title>Login | Nos Vamos</title>
  </head>
  <body >
    <div class="form-signin">
      <img src="../imgs/Logo.png" alt="Logo">
        <input type="text" class="form-control" id="userInpt" placeholder="Nombre Usuario">
        <br>
        <input type="password" class="form-control" id="passwordInp" placeholder="Password">
      <button class="btn btn-md btn-primary btn-block" id="loginBtn"><i class="fa fa-user-plus"></i> Ingresar</button>
      <br>
      <a href="registrar.html">Registrarse</a>
    </div>

    <script type="text/javascript">
      $( "#loginBtn" ).click(function() {
        var ApiUrl="http://localhost:8080/APIspring/v1/login/";
        $.ajax({
            type: "POST",
            url: ApiUrl,
            data:JSON.stringify({"password": document.getElementById("passwordInp").value  ,"email":'',"cedula": '',"nombre": document.getElementById("userInpt").value,"edad":''}),
            contentType: "application/json",
            dataType: "json",

            success: function (r) {
                if(r){
                  window.location.href = "index.html";
                }else{
                window.location.href = "login.html";
                alert("Datos incorrectos");
              }
            },
            error: function(xhr, status, error) {
                        alert(xhr.responseText)
                    }
        });
      });
    </script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </body>
</html>
